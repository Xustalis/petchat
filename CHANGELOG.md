# 更新日志

## v1.0 - MVP完善版本

### 新增功能

1. **运行时API配置**
   - 添加API配置对话框（`ui/api_config_dialog.py`）
   - 支持在运行时配置API Key和API Base URL
   - 配置保存在 `config.json`，不再依赖 `.env` 文件
   - Host端首次启动时自动弹出配置对话框

2. **记忆查看和管理**
   - 新增记忆查看器组件（`ui/memory_viewer.py`）
   - 在主窗口右侧添加"记忆"标签页
   - 支持查看所有提取的记忆
   - 支持清空记忆功能
   - 记忆按类别显示（事件、约定、话题）

3. **增强的宠物组件**
   - 添加动作动画效果
   - 情绪变化时的弹跳动画
   - 空闲时的循环动画
   - 更现代化的UI设计（渐变背景、圆角边框）

4. **现代化UI设计**
   - 改进整体配色方案
   - 更圆润的边框和阴影效果
   - 改进的按钮样式和悬停效果
   - 添加菜单栏（文件、视图、帮助）
   - 标签页式布局（建议/记忆）

5. **配置管理**
   - 新增配置管理器（`core/config_manager.py`）
   - 支持JSON格式的配置文件
   - API Key安全存储（不硬编码）

6. **打包支持**
   - 添加PyInstaller打包配置（`build.spec`）
   - 添加Nuitka打包脚本（`build_exe.py`）
   - 添加打包文档（`BUILD.md`）
   - 支持打包为单文件exe

### 改进

1. **代码结构**
   - 更好的模块化设计
   - 改进的错误处理
   - 更清晰的代码组织

2. **用户体验**
   - 更直观的界面布局
   - 更好的视觉反馈
   - 快捷键支持（Ctrl+K配置，Ctrl+M查看记忆）

3. **文档**
   - 更新README.md
   - 添加BUILD.md打包指南
   - 添加CHANGELOG.md更新日志

### 技术改进

1. **依赖管理**
   - 创建虚拟环境脚本（`setup_venv.bat` / `setup_venv.sh`）
   - 更新requirements.txt

2. **构建系统**
   - 支持PyInstaller和Nuitka两种打包方式
   - 优化的打包配置

### Bug修复

- 修复记忆显示更新问题
- 改进API配置的保存和加载逻辑
- 修复宠物动画的时序问题

### 已知问题

- PyQt6导入警告（仅linter警告，不影响运行）
- 首次打包后文件较大（PyQt6依赖）

### 下一步计划

- 添加更多宠物动画效果
- 支持多Guest连接
- 添加主题切换功能
- 优化打包体积

